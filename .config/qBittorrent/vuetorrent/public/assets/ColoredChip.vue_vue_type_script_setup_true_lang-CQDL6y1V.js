import{U as K,s as q,a as S,j as U,W as E,C as H,w as _,X as L,Y as O,c as X,u as A,Z as Y,d as j,e as z,f as J,g as Q,V as W,M as Z,N as G,i as x,k as R,l as ee,o as ae,$ as N,a0 as te}from"./index-BQJBRxbR.js";import{f as $,$ as oe,I as n,R as m,J as t,L as o,x as le,S as v,m as l,N as k,O as y,u as g,F as M,X as F,a0 as se,a1 as ne,a2 as I,b as B,r as re,e as V,M as ue,Q as ie,P as de,T as me,V as ce,Y as ye}from"./vue-DYe3GjIu.js";import{u as fe}from"./vuetify-tIkuDxYg.js";const pe={class:"d-flex"},he={key:2},ve={key:3},Ve=$({__name:"RightClickMenuEntry",props:{entryData:{}},setup(p){const a=p,d=K(O?"Meta":"Control",{initial:!1}),i=()=>{a.entryData.action&&a.entryData.action()};return(e,r)=>{const f=oe("RightClickMenuEntry",!0);return e.entryData.hidden?m("",!0):(t(),n(q,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:i},{default:o(()=>[le("div",pe,[e.entryData.disabled&&e.entryData.disabledIcon?(t(),n(S,{key:0,class:"mr-2"},{default:o(()=>[k(y(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(t(),n(S,{key:1,class:"mr-2"},{default:o(()=>[k(y(e.entryData.icon),1)]),_:1})):m("",!0),e.entryData.disabled&&e.entryData.disabledText?(t(),v("span",he,y(e.entryData.disabledText),1)):(t(),v("span",ve,y(e.entryData.text),1)),l(U),!e.entryData.disabled&&e.entryData.children?(t(),n(S,{key:4},{default:o(()=>r[0]||(r[0]=[k("mdi-chevron-right")])),_:1,__:[0]})):m("",!0)]),e.entryData.children?(t(),n(E,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-on-content-click":!g(d),"close-delay":"10","open-delay":"0",location:"right"},{default:o(()=>[l(H,null,{default:o(()=>[e.entryData.slots?.top?(t(),v(M,{key:0},[(t(!0),v(M,null,F(e.entryData.slots.top,u=>(t(),n(f,{entryData:u},null,8,["entryData"]))),256)),l(_,{thickness:"3"})],64)):m("",!0),l(L,{items:e.entryData.children,"item-height":"48",renderless:""},{default:o(({item:u})=>[l(f,{entryData:u},null,8,["entryData"])]),_:1},8,["items"]),e.entryData.slots?.bottom?(t(),v(M,{key:1},[l(_,{thickness:"3"}),(t(!0),v(M,null,F(e.entryData.slots.bottom,u=>(t(),n(f,{entryData:u},null,8,["entryData"]))),256))],64)):m("",!0)]),_:1})]),_:1},8,["close-on-content-click"])):m("",!0)]),_:1},8,["disabled"]))}}}),be=$({__name:"RightClickMenu",props:se({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const a=ne(p,"modelValue"),d=K(O?"Meta":"Control",{initial:!1});return(i,e)=>a.value?(t(),n(E,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r),activator:"parent","close-on-content-click":!g(d),transition:"slide-y-transition","scroll-strategy":"none"},{default:o(()=>[l(H,null,{default:o(()=>[I(i.$slots,"top"),i.$slots.top?(t(),n(_,{key:0,thickness:"3"})):m("",!0),l(L,{items:i.menuData,"item-height":"48",renderless:""},{default:o(({item:r})=>[l(Ve,{entryData:r},null,8,["entryData"])]),_:1},8,["items"]),i.$slots.bottom?(t(),n(_,{key:1,thickness:"3"})):m("",!0),I(i.$slots,"bottom")]),_:3})]),_:3},8,["modelValue","close-on-content-click"])):m("",!0)}}),ge=$({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(p){const a=p,{isOpened:d}=X(a.guid),{t:i}=A(),e=Y(),r=B(),f=B(),u=B(!1),h=re({newPath:""}),P=[s=>!!s||i("dialogs.moveTorrent.required")],T=V(()=>a.hashes.map(e.getTorrentByHash)),D=V(()=>{switch(a.mode){case"dl":return T.value[0]?.download_path;case"save":return T.value[0]?.savePath}});async function C(){await r.value?.validate(),u.value&&(await e.toggleAutoTmm(a.hashes,!1),await e.moveTorrents(a.mode,a.hashes,h.newPath),f.value?.saveValueToHistory(),w())}const w=()=>{d.value=!1};return ue(()=>{h.newPath=D.value||""}),(s,c)=>(t(),n(ee,{modelValue:g(d),"onUpdate:modelValue":c[3]||(c[3]=b=>me(d)?d.value=b:null)},{default:o(()=>[l(j,null,{default:o(()=>[l(z,null,{default:o(()=>[k(y(s.$t(`dialogs.moveTorrent.${s.mode}.title`)),1)]),_:1}),l(J,null,{default:o(()=>[l(g(Q),{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=b=>u.value=b),ref_key:"form",ref:r,onSubmit:c[2]||(c[2]=ie(()=>{},["prevent"]))},{default:o(()=>[D.value?(t(),n(W,{key:0,"model-value":D.value,disabled:"",label:s.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):m("",!0),l(Z,{modelValue:h.newPath,"onUpdate:modelValue":c[0]||(c[0]=b=>h.newPath=b),historyKey:g(G).TORRENT_PATH,ref_key:"field",ref:f,rules:P,autofocus:"",label:s.$t("dialogs.moveTorrent.newPath"),onKeydown:de(C,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),l(x,null,{default:o(()=>[l(U),l(R,{color:"error",onClick:w},{default:o(()=>[k(y(s.$t("common.cancel")),1)]),_:1}),l(R,{color:"accent",disabled:!u.value,onClick:C},{default:o(()=>[k(y(s.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Te=$({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(p){const a=p,{t:d}=A(),{current:i}=fe(),e=ae(),{enableHashColors:r,hideColoredChip:f}=ce(e);function u(s){return i.value.colors[s]??s}function h(s){return P.value?s.darken(30):s}const P=V(()=>e.theme.mode==="dark"&&e.theme.dark==="dark-oled"),T=V(()=>a.disabled||!r.value?a.defaultColor:N(a.value,h)),D=V(()=>a.disabled||!r.value?u(a.defaultColor):N(a.value,h)),C=V(()=>a.disabled?a.disabledValue||a.value||d("common.none"):a.value),w=V(()=>!f.value);return(s,c)=>w.value?(t(),n(te,{key:0,color:T.value,variant:"flat"},{default:o(()=>[k(y(C.value),1)]),_:1},8,["color"])):(t(),v("div",{key:1,class:"text-no-wrap",style:ye(`color: ${D.value}`)},y(C.value),5))}});export{be as _,ge as a,Te as b};
